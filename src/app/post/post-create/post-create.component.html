<mat-spinner *ngIf = "isLoading"></mat-spinner>

<mat-card *ngIf = "!isLoading">
    <form [formGroup]="form" (submit)="onSavePost()">
        <mat-form-field>
            <input 
            matInput 
            rows="4" 
            formControlName = "title"
            placeholder="Enter Title">
            <mat-error *ngIf="form.get('title')?.invalid">Please enter a post Tiltle </mat-error>
        </mat-form-field>   
        <div>
            <button mat-stroked-button type = "button" (click)="filepicker.click()">
                Pick Image
            </button>
            <input type = "file" #filepicker (change) = "onImagePicked($event)">
        </div>
        <div class = "imagepreview">
            <img *ngIf="this.imagepreview && this.imagepreview !== '' && form.get('image')?.valid"
             [src] = "this.imagepreview" [alt] = "this.form.get('title')">
        </div>
         <mat-form-field>
            <textarea 
            matInput 
            rows="4" 
            formControlName = "content"
            placeholder="Enter Content">New Content</textarea>
            <mat-error *ngIf="form.get('content')?.invalid">Please enter a post Content </mat-error>    
        </mat-form-field>
        <button 
        mat-button 
        color = 'primary'
        type = "submit">Save Post</button>
    </form>
    
</mat-card>
